{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.js","webpack:///./node_modules/node-fetch/lib/index.es.js","webpack:///external \"stream\"","webpack:///external \"http\"","webpack:///external \"url\"","webpack:///external \"https\"","webpack:///external \"zlib\"","webpack:///external \"crypto\""],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","w","s","WrapSplashApi","options","_classCallCheck","this","API_LOCATION","BEARER_TOKEN_URL","Error","access_key","secret_key","redirect_uri","code","grant_type","hash","crypto","createHmac","digest","bearer_token","headers","Content-type","Authorization","X-WrapSplash-Header","availableOrders","availableOrientations","url","method","_nodeFetch2","default","then","res","json","catch","err","Promise","reject","fetchUrl","urlConfig","CURRENT_USER_PROFILE","username","first_name","last_name","email","location","bio","instagram_username","_url","UPDATE_CURRENT_USER_PROFILE","width","height","USERS_PUBLIC_PROFILE","isNaN","undefined","USERS_PORTFOLIO","replace","page","per_page","stats","resolution","quantity","order_by","includes","USERS_PHOTOS","encodeURIComponent","USERS_LIKED_PHOTOS","USERS_COLLECTIONS","USERS_STATISTICS","LIST_PHOTOS","LIST_CURATED_PHOTOS","id","rect","length","GET_A_PHOTO","typeof","collections","featured","query","orientation","count","GET_A_RANDOM_PHOTO","GET_A_PHOTO_STATISTICS","GET_A_PHOTO_DOWNLOAD_LINK","exif","assign","UPDATE_A_PHOTO","latitude","longitude","city","country","confidential","make","model","exposure_time","aperture_value","focal_length","iso_speed_ratings","LIKE_A_PHOTO","UNLIKE_A_PHOTO","SEARCH_PHOTOS","SEARCH_COLLECTIONS","SEARCH_USERS","STATS_TOTALS","STATS_MONTH","LIST_COLLECTIONS","LIST_FEATURED_COLLECTIONS","LIST_CURATED_COLLECTIONS","GET_COLLECTION","GET_CURATED_COLLECTION","GET_COLLECTION_PHOTOS","GET_CURATED_COLLECTION_PHOTOS","LIST_RELATED_COLLECTION","title","description","private_collection","CREATE_NEW_COLLECTION","UPDATE_EXISTING_COLLECTION","DELETE_COLLECTION","collection_id","photo_id","ADD_PHOTO_TO_COLLECTION","REMOVE_PHOTO_FROM_COLLECTION","__webpack_exports__","FetchError","BUFFER","Symbol","TYPE","Blob","[object Object]","blobParts","arguments","buffers","a","Number","element","buffer","Buffer","ArrayBuffer","isView","from","byteOffset","byteLength","String","push","concat","type","toLowerCase","test","size","start","end","relativeStart","relativeEnd","Math","max","min","span","slicedBuffer","slice","blob","message","systemError","errno","captureStackTrace","constructor","defineProperties","toStringTag","writable","create","Stream","PassThrough","convert","e","INTERNALS","Body","body","_this","_ref","_ref$size","_ref$timeout","timeout","isURLSearchParams","isBuffer","toString","disturbed","error","on","consumeBody","_this4","TypeError","resolve","alloc","accum","accumBytes","abort","resTimeout","setTimeout","chunk","clearTimeout","obj","append","delete","getAll","has","set","sort","clone","instance","p1","p2","bodyUsed","getBoundary","pipe","getTotalBytes","getLengthSync","_lengthRetrievers","hasKnownLength","buf","ct","_this2","JSON","parse","_this3","str","charset","exec","pop","convertBody","arrayBuffer","text","mixIn","proto","getOwnPropertyNames","desc","getOwnPropertyDescriptor","global","invalidTokenRegex","invalidHeaderCharRegex","validateName","validateValue","find","map","key","MAP","Headers","init","rawHeaders","raw","headerNames","keys","headerName","iterator","pairs","pair","Array","join","callback","thisArg","getHeaders","_pairs$i","createHeadersIterator","kind","k","entries","forEach","values","INTERNAL","target","HeadersIteratorPrototype","index","setPrototypeOf","getPrototypeOf","_INTERNAL","done","STATUS_CODES","INTERNALS$1","Response","opts","status","statusText","ok","_require$2","format_url","format","parse_url","INTERNALS$2","isRequest","input","Request","parsedURL","href","toUpperCase","inputBody","contentType","extractContentType","redirect","follow","compress","counter","agent","getNodeRequestOptions","request","protocol","hostname","contentLengthValue","totalBytes","__proto__","hostHeaderKey","exportNodeCompatibleHeaders","http","https","PassThrough$1","resolve_url","zlib","fetch","req","send","reqTimeout","finalize","once","socket","isArray","val","createHeadersLenient","isRedirect","statusCode","locationURL","requestOpts","response_options","statusMessage","codings","zlibOptions","flush","Z_SYNC_FLUSH","finishFlush","createGunzip","createInflate","createInflateRaw","dest","write","writeToStream","require"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// object with all compiled WebAssembly.Modules\n \t__webpack_require__.w = {};\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/**\r\n * Wrapsplash API wrapper v3.0.0 for Unspalsh API\r\n * written by: Sandeep Vattapparambil\r\n * email: sandeepv68@gmail.com\r\n * website: www.sandeepv.in\r\n * github: github.com/SandeepVattapparambil\r\n * license: MIT\r\n */\r\n\r\n/**\r\n * WrapSplash Module\r\n * @module WrapSplashApi\r\n */\r\n\r\n'use strict';\r\n//constants. \r\nimport fetch from 'node-fetch';\r\nimport crypto from 'crypto';\r\n//API Schema definitions\r\nimport urlConfig from '../config/url_config.json';\r\n\r\n/**\r\n * The main WrapSplash Class.\r\n * @class WrapSplash\r\n */\r\nclass WrapSplashApi {\r\n    /**\r\n     * The Options object constructor\r\n     * @param  {Object} options - The Options object to initialize the class.\r\n     */\r\n    constructor(options) {\r\n        //The location of the Unsplash API\r\n        this.API_LOCATION = 'https://api.unsplash.com/';\r\n        //The API to generate Unsplash API Bearer Token.\r\n        this.BEARER_TOKEN_URL = 'https://unsplash.com/oauth/token';\r\n\r\n        if (options) {\r\n            options = { ...{},\r\n                ...options\r\n            };\r\n            this.access_key = (options.access_key ? options.access_key : (function () {\r\n                throw new Error('Access Key missing!');\r\n            }()));\r\n            this.secret_key = (options.secret_key ? options.secret_key : (function () {\r\n                throw new Error('Secret Key missing!');\r\n            }()));\r\n            this.redirect_uri = (options.redirect_uri ? options.redirect_uri : (function () {\r\n                throw new Error('Redirect URI missing!');\r\n            }()));\r\n            this.code = (options.code ? options.code : (function () {\r\n                throw new Error('Authorization Code missing!');\r\n            }()));\r\n            this.grant_type = 'authorization_code';\r\n            let hash = crypto.createHmac('sha256', this.access_key).digest('hex');\r\n            if (options.bearer_token) {\r\n                this.bearer_token = options.bearer_token;\r\n            }\r\n            this.headers = {\r\n                'Content-type': 'application/json',\r\n                'Authorization': (this.bearer_token ? 'Bearer ' + this.bearer_token : 'Client-ID ' + this.access_key),\r\n                'X-WrapSplash-Header': hash\r\n            };\r\n        } else {\r\n            throw new Error('Initilisation parameters missing!');\r\n        }\r\n        //Set available order_by options\r\n        this.availableOrders = ['latest', 'oldest', 'popular'];\r\n        //Sset available orientation options\r\n        this.availableOrientations = ['landscape', 'portrait', 'squarish'];\r\n    };\r\n\r\n    /**\r\n     * Heler function to fetch a given url\r\n     * @function fetchUrl\r\n     * @param {String} url - The url to be fetched (required).\r\n     * @param {String} method - The HTTP method to be used (required).\r\n     * @returns {Object} - The JSON data object.\r\n     */\r\n    fetchUrl(url, method) {\r\n        return fetch(url, {\r\n            method: method,\r\n            headers: (this.headers ? this.headers : '')\r\n        }).then(function (res) {\r\n            return res.json();\r\n        }).catch(function (err) {\r\n            return Promise.reject(err);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Promise factory to generate a Bearer Token for write_access to private data.\r\n     * The Unsplash API uses OAuth2 to authenticate and authorize Unsplash users. \r\n     * Unsplash’s OAuth2 paths live at https://unsplash.com/oauth/.\r\n     * @function generateBearerToken\r\n     * @memberof UnsplashApi\r\n     * @returns {Object} - The user's Access Token JSON data object.\r\n     */\r\n    generateBeareToken() {\r\n        let url = this.BEARER_TOKEN_URL +\r\n            '?client_id=' + (this.access_key) +\r\n            '&client_secret=' + (this.secret_key) +\r\n            '&redirect_uri=' + (this.redirect_uri) +\r\n            '&code=' + (this.code) +\r\n            '&grant_type=' + (this.grant_type);\r\n        return this.fetchUrl(url, 'POST');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to get the current User's profile.\r\n     * To access a user’s private data, the user is required to \r\n     * authorize the read_user scope. Without it, this request \r\n     * will return a 403 Forbidden response.\r\n     * Without a Bearer token (i.e. using a Client-ID token) this request \r\n     * will return a 401 Unauthorized response.\r\n     * @function getCurrentUserProfile\r\n     * @memberof UnsplashApi\r\n     * @returns {Object} - The JSON data Object.\r\n     */\r\n    getCurrentUserProfile() {\r\n        let url = this.API_LOCATION + urlConfig.CURRENT_USER_PROFILE;\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to update the current User's profile.\r\n     * This action requires the write_user scope. Without it, it will return a 403 Forbidden response.\r\n     * @function updateCurrentUserProfile\r\n     * @memberof UnsplashApi\r\n     * @param {String} username - The username of the current user (Optional).\r\n     * @param {String} first_name - The first name of the current user (Optional).\r\n     * @param {String} last_name - The last name of the current user (Optional).\r\n     * @param {String} email - The email id of the current user (Optional).\r\n     * @param {String} url - The Portfolio/personal URL of the current user (Optional).\r\n     * @param {String} location - The location of the current user (Optional).\r\n     * @param {String} bio - The About/bio of the current user (Optional).\r\n     * @param {String} instagram_username - The Instagram username of the current user (Optional).\r\n     * @returns {Object} - The JSON data Object.\r\n     */\r\n    updateCurrentUserProfile(username, first_name, last_name, email, url, location, bio, instagram_username) {\r\n        let _url = this.API_LOCATION + urlConfig.UPDATE_CURRENT_USER_PROFILE + '?' +\r\n            (username ? '?username=' + username : '') +\r\n            (first_name ? '&first_name=' + first_name : '') +\r\n            (last_name ? '&last_name=' + last_name : '') +\r\n            (email ? '&email=' + email : '') +\r\n            (url ? '&url=' + url : '') +\r\n            (location ? '&location=' + location : '') +\r\n            (bio ? '&bio=' + bio : '') +\r\n            (instagram_username ? '&instagram_username=' + instagram_username : '');\r\n        return this.fetchUrl(_url, 'PUT');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to retrieve public details on a given user.\r\n     * @function getPublicProfile\r\n     * @memberof UnsplashApi\r\n     * @param {*} username - The username of the particular user (required). \r\n     * @param {Number} width - The width of the profile image to be fetched (Optional).\r\n     * @param {Number} height - The height of the profile image to be fetched (Optional).\r\n     *                          Will be included in the 'profile_image' object as 'custom'. \r\n     * @returns {Object} - The JSON data object. \r\n     */\r\n    getPublicProfile(username, width, height) {\r\n        let url = this.API_LOCATION + urlConfig.USERS_PUBLIC_PROFILE + username +\r\n            '?w=' + (width && !isNaN(width) ? +width : '') +\r\n            '&h=' + (height && !isNaN(height) ? +height : '');\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to retrieve a single user’s portfolio link.\r\n     * @function getUserPortfolio\r\n     * @memberof UnsplashApi\r\n     * @param {*} username - The username of the user to fetch the portfolio (required).\r\n     * @returns {Object} - The JSON data object. \r\n     */\r\n    getUserPortfolio(username) {\r\n        if (!username || username === '' || username === undefined) {\r\n            throw new Error('Parameter : username is required and cannot be empty!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.USERS_PORTFOLIO.replace(/:username/gi, username);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to get a list of photos uploaded by a particular user.\r\n     * @function getUserPhotos\r\n     * @memberof UnsplashApi\r\n     * @param {*} username - The username of the user to fetch the portfolio (required).\r\n     * @param {Number} page - The page number of results to fetch (Optional, defaults to 1).\r\n     * @param {Number} per_page - The number of items per page (Optional, defaults to 10).\r\n     * @param {Booelan} stats - Show the stats for each user’s photo (Optional; default: false).\r\n     * @param {String} resolution - The frequency of the stats (Optional; default: 'days').\r\n     * @param {Number} quantity - The amount of for each stat (Optional; default: 30).\r\n     * @param {String} order_by - The sort method for results (Optional, Valid values: latest, oldest, popular; defaults to: latest).\r\n     * @returns {Object} - The JSON data object. \r\n     */\r\n    getUserPhotos(username, page, per_page, stats, resolution, quantity, order_by) {\r\n        if (!username || username === '' || username === undefined) {\r\n            throw new Error('Parameter : username is required and cannot be empty!');\r\n        }\r\n        if (order_by !== undefined && !this.availableOrders.includes(order_by)) {\r\n            throw new Error('Parameter : order_by has an unsupported value!');\r\n        }\r\n        if (stats !== undefined && typeof (stats) !== 'boolean') {\r\n            throw new Error('Parameter : stats is a boolean or optional!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.USERS_PHOTOS.replace(/:username/gi, username) +\r\n            '?page=' + (page && !isNaN(page) ? +page : 1) +\r\n            '&per_page=' + (per_page && !isNaN(per_page) ? +per_page : 10) +\r\n            '&order_by=' + (order_by ? order_by : 'latest') +\r\n            '&stats=' + (stats ? stats : 'false') +\r\n            '&resolution=' + (resolution ? encodeURIComponent(resolution) : 'days') +\r\n            '&quantity=' + (quantity ? quantity : 30);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to get a list of photos liked by a user.\r\n     * @function getUserLikedPhotos\r\n     * @memberof UnsplashApi\r\n     * @param {*} username - The username of the user to fetch the portfolio (required).\r\n     * @param {Number} page - The page number of results to fetch (Optional, defaults to 1).\r\n     * @param {Number} per_page - The number of items per page (Optional, defaults to 10).\r\n     * @param {String} order_by - The sort method for results (Optional, Valid values: latest, oldest, popular; defaults to: latest).\r\n     * @returns {Object} - The JSON data object. \r\n     */\r\n    getUserLikedPhotos(username, page, per_page, order_by) {\r\n        if (!username || username === '' || username === undefined) {\r\n            throw new Error('Parameter : username is required and cannot be empty!');\r\n        }\r\n        if (order_by !== undefined && !this.availableOrders.includes(order_by)) {\r\n            throw new Error('Parameter : order_by has an unsupported value!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.USERS_LIKED_PHOTOS.replace(/:username/gi, username) +\r\n            '?page=' + (page && !isNaN(page) ? +page : 1) +\r\n            '&per_page=' + (per_page && !isNaN(per_page) ? +per_page : 10) +\r\n            '&order_by=' + (order_by ? order_by : 'latest');\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to get a list of collections created by the user.\r\n     * @function getUserCollections\r\n     * @memberof UnsplashApi\r\n     * @param {*} username - The username of the user to fetch the portfolio (required).\r\n     * @param {Number} page - The page number of results to fetch (Optional, defaults to 1).\r\n     * @param {Number} per_page - The number of items per page (Optional, defaults to 10).\r\n     * @returns {Object} - The JSON data object. \r\n     */\r\n    getUserCollections(username, page, per_page) {\r\n        if (!username || username === '' || username === undefined) {\r\n            throw new Error('Parameter : username is required and cannot be empty!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.USERS_COLLECTIONS.replace(/:username/gi, username) +\r\n            '?page=' + (page && !isNaN(page) ? +page : 1) +\r\n            '&per_page=' + (per_page && !isNaN(per_page) ? +per_page : 10);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Pomise factory to retrieve the consolidated number of downloads, views and likes of all user’s photos, \r\n     * as well as the historical breakdown and average of these stats in a specific timeframe.\r\n     * @function getUserStatistics\r\n     * @memberof UnsplashApi\r\n     * @param {*} username - The username of the user to fetch the portfolio (required).\r\n     * @param {String} resolution - The frequency of the stats (Optional; default: 'days').\r\n     * @param {Number} quantity - The amount of for each stat (Optional; default: 30).\r\n     * @returns {Object} - The JSON data object. \r\n     */\r\n    getUserStatistics(username, resolution, quantity) {\r\n        if (!username || username === '' || username === undefined) {\r\n            throw new Error('Parameter : username is required and cannot be empty!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.USERS_STATISTICS.replace(/:username/gi, username) +\r\n            '?resolution=' + (resolution ? encodeURIComponent(resolution) : 'days') +\r\n            '&quantity=' + (quantity ? quantity : 30);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to access the list Photos endpoint of the Unsplash API.\r\n     * @function listPhotos\r\n     * @memberof UnsplashApi\r\n     * @param {Number} page - The page number of results to fetch (Optional, defaults to 1).\r\n     * @param {Number} per_page - The number of items per page (Optional, defaults to 10).\r\n     * @param {String} order_by - The sort method for results (Optional, Valid values: latest, oldest, popular; defaults to: latest).\r\n     * @returns {Object} - The JSON data object. \r\n     */\r\n    listPhotos(page, per_page, order_by) {\r\n        if (order_by !== undefined && !this.availableOrders.includes(order_by)) {\r\n            throw new Error('Parameter : order_by has an unsupported value!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.LIST_PHOTOS +\r\n            '?page=' + (page && !isNaN(page) ? +page : 1) +\r\n            '&per_page=' + (per_page && !isNaN(per_page) ? +per_page : 10) +\r\n            '&order_by=' + (order_by ? order_by : 'latest');\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to get a single page from the list of the curated photos.\r\n     * @function listCuratedPhotos\r\n     * @memberof UnsplashApi\r\n     * @param {Number} page - The page number of results to fetch (Optional, defaults to 1).\r\n     * @param {Number} per_page - The number of items per page (Optional, defaults to 10).\r\n     * @param {String} order_by - The sort method for results (Optional, Valid values: latest, oldest, popular; defaults to: latest).\r\n     * @returns {Object} - The JSON data object. \r\n     */\r\n    listCuratedPhotos(page, per_page, order_by) {\r\n        if (order_by !== undefined && !this.availableOrders.includes(order_by)) {\r\n            throw new Error('Parameter : order_by has an unsupported value!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.LIST_CURATED_PHOTOS +\r\n            '?page=' + (page && !isNaN(page) ? +page : 1) +\r\n            '&per_page=' + (per_page && !isNaN(per_page) ? +per_page : 10) +\r\n            '&order_by=' + (order_by ? order_by : 'latest');\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to retrieve a single photo.\r\n     * @function getAPhoto\r\n     * @memberof UnsplashApi\r\n     * @param {String} id - The photo’s ID (required).\r\n     * @param {Number} width - Image width in pixels (optional).\r\n     * @param {Number} height - Image height in pixels (optionl).\r\n     * @param {String} rect - 4 comma-separated integers representing x, y, width, height of the cropped rectangle (optional).\r\n     * @returns {Object} - The JSON data object. \r\n     */\r\n    getAPhoto(id, width, height, rect) {\r\n        if (!id || id === undefined || id.length === 0) {\r\n            throw new Error('Parameter : id is required!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.GET_A_PHOTO.replace(/:id/gi, id) +\r\n            '?w=' + (width && !isNaN(width) ? +width : '') +\r\n            '&h=' + (height && !isNaN(height) ? +height : '') +\r\n            '&rect=' + (rect && rect.typeof === 'string' ? +encodeURIComponent(rect) : '');\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to retrieve a single random photo, given optional filters.\r\n     * All parameters are optional, and can be combined to narrow the pool of \r\n     * photos from which a random one will be chosen.\r\n     * You can’t use the collections and query parameters in the same request \r\n     * When supplying a count parameter - and only then - the response will be an \r\n     * array of photos, even if the value of count is 1.\r\n     * @function getARandomPhoto\r\n     * @memberof UnsplashApi\r\n     * @param {String} collections - The public collection ID(‘s) to filter selection. If multiple, comma-separated\r\n     * @param {Boolean} featured - Limit selection to featured photos.\r\n     * @param {String} username - Limit selection to a single user.\r\n     * @param {String} query - Limit selection to photos matching a search term.\r\n     * @param {Number} width - The Image width in pixels.\r\n     * @param {Number} height - The Image height in pixels.\r\n     * @param {String} orientation - Filter search results by photo orientation. Valid values are landscape, portrait, and squarish.\r\n     * @param {Number} count - The number of photos to return. (Default: 1; max: 30).\r\n     * @returns {Object} - The JSON data object.\r\n     */\r\n    getARandomPhoto(collections, featured, username, query, width, height, orientation, count) {\r\n        if (!this.availableOrientations.includes(orientation) && orientation !== undefined) {\r\n            throw new Error('Parameter : orientation has an unsupported value!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.GET_A_RANDOM_PHOTO +\r\n            '?collections=' + (collections && !isNaN(collections) ? +encodeURIComponent(collections) : '') +\r\n            '&featured=' + (featured ? featured : false) +\r\n            '&username=' + (username ? username : '') +\r\n            '&query=' + (query ? encodeURIComponent(query) : '') +\r\n            '&width=' + (width ? width : '') +\r\n            '&height=' + (height ? height : '') +\r\n            '&orientation=' + (orientation ? orientation : 'landscape') +\r\n            '&count=' + (count ? count : 1);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to retrieve total number of downloads, views and likes of a single photo, \r\n     * as well as the historical breakdown of these stats in a specific timeframe (default is 30 days).\r\n     * @function getPhotoStatistics\r\n     * @memberof UnsplashApi\r\n     * @param {String} id - The photo’s ID (required).\r\n     * @param {String} resolution - The frequency of the stats (Optional; default: 'days').\r\n     * @param {Number} quantity - The amount of for each stat (Optional; default: 30).\r\n     * @returns {Object} - The JSON data object.\r\n     */\r\n    getPhotoStatistics(id, resolution, quantity) {\r\n        if (!id || id === undefined || id.length === 0) {\r\n            throw new Error('Parameter : id is required!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.GET_A_PHOTO_STATISTICS.replace(/:id/gi, id) +\r\n            '?resolution=' + (resolution ? encodeURIComponent(resolution) : 'days') +\r\n            '&quantity=' + (quantity ? quantity : 30);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to retrieve a single photo’s download link. Preferably hit this endpoint \r\n     * if a photo is downloaded in your application for use (example: to be displayed on a blog article, \r\n     * to be shared on social media, to be remixed, etc).\r\n     * This is different than the concept of a view, which is tracked automatically when you hotlinking an image.\r\n     * @function getPhotoLink\r\n     * @memberof UnsplashApi\r\n     * @param {String} id - The photo’s ID (required).\r\n     * @returns {Object} - The JSON data object.\r\n     */\r\n    getPhotoLink(id) {\r\n        if (!id || id === undefined || id.length === 0) {\r\n            throw new Error('Parameter : id is required!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.GET_A_PHOTO_DOWNLOAD_LINK.replace(/:id/gi, id);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to update a photo on behalf of the logged-in user. \r\n     * This requires the write_photos scope.\r\n     * @function updatePhoto\r\n     * @memberof UnsplashApi\r\n     * @param {String} id - The photo’s ID (required).\r\n     * @param {Object} location - The location object holding location data (Optional).\r\n     * @param {Object} exif - The exif object holding exif data (Optional).\r\n     * @returns {Object} - The updated photo data object.\r\n     */\r\n    updatePhoto(id, location, exif) {\r\n        if (!id || id === undefined || id.length === 0) {\r\n            throw new Error('Parameter : id is required!');\r\n        }\r\n        location = Object.assign({}, location) || {};\r\n        exif = Object.assign({}, exif) || {};\r\n        let url = this.API_LOCATION + urlConfig.UPDATE_A_PHOTO.replace(/:id/, id) + '?' +\r\n            (location.latitude ? '&location[latitude]=' + encodeURIComponent(location.latitude) : '') +\r\n            (location.longitude ? '&location[longitude]=' + encodeURIComponent(location.longitude) : '') +\r\n            (location.name ? '&location[name]=' + encodeURIComponent(location.name) : '') +\r\n            (location.city ? '&location[city]=' + encodeURIComponent(location.city) : '') +\r\n            (location.country ? '&location[country]=' + encodeURIComponent(location.country) : '') +\r\n            (location.confidential ? '&location[confidential]=' + encodeURIComponent(location.confidential) : '') +\r\n            (exif.make ? '&exif[make]=' + encodeURIComponent(exif.make) : '') +\r\n            (exif.model ? '&exif[model]=' + encodeURIComponent(exif.model) : '') +\r\n            (exif.exposure_time ? '&exif[exposure_time]=' + encodeURIComponent(exif.exposure_time) : '') +\r\n            (exif.aperture_value ? '&exif[aperture_value]=' + encodeURIComponent(exif.aperture_value) : '') +\r\n            (exif.focal_length ? '&exif[focal_length]=' + encodeURIComponent(exif.focal_length) : '') +\r\n            (exif.iso_speed_ratings ? '&exif[iso_speed_ratings]=' + encodeURIComponent(exif.iso_speed_ratings) : '');\r\n        return this.fetchUrl(url, 'PUT');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to like a photo on behalf of the logged-in user. \r\n     * This requires the write_likes scope.\r\n     * This action is idempotent; sending the POST request to a single photo \r\n     * multiple times has no additional effect.\r\n     * @function likePhoto\r\n     * @memberof UnsplashApi\r\n     * @param {String} id - The photo’s ID (required).\r\n     * @returns {Object} - The updated photo data object.\r\n     */\r\n    likePhoto(id) {\r\n        if (!id || id === undefined || id.length === 0) {\r\n            throw new Error('Parameter : id is required!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.LIKE_A_PHOTO.replace(/:id/gi, id);\r\n        return this.fetchUrl(url, 'POST');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to remove a user’s like of a photo.\r\n     * This action is idempotent; sending the DELETE request \r\n     * to a single photo multiple times has no additional effect.\r\n     * @function unlikePhoto\r\n     * @memberof UnsplashApi\r\n     * @param {String} id - The photo’s ID (required).\r\n     * @returns {Object} - The updated photo data object.\r\n     */\r\n    unlikePhoto(id) {\r\n        if (!id || id === undefined || id.length === 0) {\r\n            throw new Error('Parameter : id is required!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.UNLIKE_A_PHOTO.replace(/:id/gi, id);\r\n        return this.fetchUrl(url, 'DELETE');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to access the Search Photos endpoint of the Unsplash API.\r\n     * @function search\r\n     * @memberof UnsplashApi\r\n     * @param {String} query - The search query (required).\r\n     * @param {Number} page - The page number of results to fetch (Optional, defaults to 1).\r\n     * @param {Number} per_page - The number of items per page (Optional, defaults to 10).\r\n     * @param {Number} collections - The collection ID(‘s) to narrow the search. If multiple, comma-separated (Optional).\r\n     * @param {String} orientation - Filter search results by photo orientation (Optional, Valid values are landscape, portrait, and squarish, defaults to: landscape).\r\n     * @returns {Object} - The JSON data object.\r\n     */\r\n    search(query, page, per_page, collections, orientation) {\r\n        if (!this.availableOrientations.includes(orientation) && orientation !== undefined) {\r\n            throw new Error('Parameter : orientation has an unsupported value!');\r\n        }\r\n        if (query === undefined) {\r\n            throw new Error('Parameter : query is missing!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.SEARCH_PHOTOS +\r\n            '?query=' + (query ? encodeURIComponent(query) : '') +\r\n            '&page=' + (page && !isNaN(page) ? +page : 1) +\r\n            '&per_page=' + (per_page && !isNaN(per_page) ? +per_page : 10) +\r\n            '&collections=' + (collections && !isNaN(collections) ? +collections : '') +\r\n            '&orientation=' + (orientation ? encodeURIComponent(orientation) : '');\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to get a single page of collection results for a query.\r\n     * @function searchCollections\r\n     * @memberof UnsplashApi\r\n     * @param {String} query - The search query (required).\r\n     * @param {Number} page - The page number of results to fetch (Optional, defaults to 1).\r\n     * @param {Number} per_page - The number of items per page (Optional, defaults to 10).\r\n     * @returns {Object} - The JSON data object.\r\n     */\r\n    searchCollections(query, page, per_page) {\r\n        if (query === undefined) {\r\n            throw new Error('Parameter : query is missing!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.SEARCH_COLLECTIONS +\r\n            '?query=' + (query ? encodeURIComponent(query) : '') +\r\n            '&page=' + (page && !isNaN(page) ? +page : 1) +\r\n            '&per_page=' + (per_page && !isNaN(per_page) ? +per_page : 10);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to get a single page of user results for a query.\r\n     * @function searchUsers\r\n     * @memberof UnsplashApi\r\n     * @param {String} query - The search query (required).\r\n     * @param {Number} page - The page number of results to fetch (Optional, defaults to 1).\r\n     * @param {Number} per_page - The number of items per page (Optional, defaults to 10).\r\n     * @returns {Object} - The JSON data object.\r\n     */\r\n    searchUsers(query, page, per_page) {\r\n        if (query === undefined) {\r\n            throw new Error('Parameter : query is missing!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.SEARCH_USERS +\r\n            '?query=' + (query ? encodeURIComponent(query) : '') +\r\n            '&page=' + (page && !isNaN(page) ? +page : 1) +\r\n            '&per_page=' + (per_page && !isNaN(per_page) ? +per_page : 10);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to get a list of counts for all of Unsplash.\r\n     * @function getStatsTotals\r\n     * @memberof UnsplashApi\r\n     * @returns {Object} - The JSON data object.\r\n     */\r\n    getStatsTotals() {\r\n        let url = this.API_LOCATION + urlConfig.STATS_TOTALS;\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to get the overall Unsplash stats for the past 30 days.\r\n     * @function getStatsMonth\r\n     * @memberof UnsplashApi\r\n     * @returns {Object} - The JSON data object.\r\n     */\r\n    getStatsMonth() {\r\n        let url = this.API_LOCATION + urlConfig.STATS_MONTH;\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to get a single page from the list of all collections.\r\n     * @function listCollections\r\n     * @memberof UnsplashApi\r\n     * @param {Number} page - The page number of results to fetch (Optional, defaults to 1).\r\n     * @param {Number} per_page - The number of items per page (Optional, defaults to 10).\r\n     * @returns {Object} - The JSON data object.\r\n     */\r\n    listCollections(page, per_page) {\r\n        let url = this.API_LOCATION + urlConfig.LIST_COLLECTIONS +\r\n            '?page=' + (page && !isNaN(page) ? +page : 1) +\r\n            '&per_page=' + (per_page && !isNaN(per_page) ? +per_page : 10);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to get a single page from the list of featured collections.\r\n     * @function listFeaturedCollections\r\n     * @memberof UnsplashApi\r\n     * @param {Number} page - The page number of results to fetch (Optional, defaults to 1).\r\n     * @param {Number} per_page - The number of items per page (Optional, defaults to 10).\r\n     * @returns {Object} - The JSON data object.\r\n     */\r\n    listFeaturedCollections(page, per_page) {\r\n        let url = this.API_LOCATION + urlConfig.LIST_FEATURED_COLLECTIONS +\r\n            '?page=' + (page && !isNaN(page) ? +page : 1) +\r\n            '&per_page=' + (per_page && !isNaN(per_page) ? +per_page : 10);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to get a single page from the list of curated collections.\r\n     * @function listCuratedCollections\r\n     * @memberof UnsplashApi\r\n     * @param {Number} page - The page number of results to fetch (Optional, defaults to 1).\r\n     * @param {Number} per_page - The number of items per page (Optional, defaults to 10).\r\n     * @returns {Object} - The JSON data object.\r\n     */\r\n    listCuratedCollections(page, per_page) {\r\n        let url = this.API_LOCATION + urlConfig.LIST_CURATED_COLLECTIONS +\r\n            '?page=' + (page && !isNaN(page) ? +page : 1) +\r\n            '&per_page=' + (per_page && !isNaN(per_page) ? +per_page : 10);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to retrieve a single collection. \r\n     * To view a user’s private collections, the read_collections scope is required.\r\n     * @function getCollection\r\n     * @memberof UnsplashApi\r\n     * @param {String} id - The Collection ID (required).\r\n     * @returns {Object} - The updated photo data object.\r\n     */\r\n    getCollection(id) {\r\n        if (!id || id === undefined || id.length === 0) {\r\n            throw new Error('Parameter : id is required!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.GET_COLLECTION.replace(/:id/gi, id);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to retrieve a single curated collection. \r\n     * To view a user’s private collections, the read_collections scope is required.\r\n     * @function getCuratedCollection\r\n     * @memberof UnsplashApi\r\n     * @param {String} id - The Collection ID (required).\r\n     * @returns {Object} - The updated photo data object.\r\n     */\r\n    getCuratedCollection(id) {\r\n        if (!id || id === undefined || id.length === 0) {\r\n            throw new Error('Parameter : id is required!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.GET_CURATED_COLLECTION.replace(/:id/gi, id);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to retrieve a collection’s photos.\r\n     * @function getCollectionPhotos\r\n     * @memberof UnsplashApi\r\n     * @param {String} id - The Collection ID (required).\r\n     * @param {Number} page - The page number of results to fetch (Optional, defaults to 1). \r\n     * @param {Number} per_page - The number of items per page (Optional, defaults to 10).\r\n     * @returns {Object} - The updated photo data object.\r\n     */\r\n    getCollectionPhotos(id, page, per_page) {\r\n        if (!id || id === undefined || id.length === 0) {\r\n            throw new Error('Parameter : id is required!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.GET_COLLECTION_PHOTOS.replace(/:id/gi, id) +\r\n            '?page=' + (page && !isNaN(page) ? +page : 1) +\r\n            '&per_page=' + (per_page && !isNaN(per_page) ? +per_page : 10);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to retrieve a curated collection’s photos.\r\n     * @function getCuratedCollectionPhotos\r\n     * @memberof UnsplashApi\r\n     * @param {String} id - The Collection ID (required).\r\n     * @param {Number} page - The page number of results to fetch (Optional, defaults to 1). \r\n     * @param {Number} per_page - The number of items per page (Optional, defaults to 10).\r\n     * @returns {Object} - The updated photo data object.\r\n     */\r\n    getCuratedCollectionPhotos(id, page, per_page) {\r\n        if (!id || id === undefined || id.length === 0) {\r\n            throw new Error('Parameter : id is required!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.GET_CURATED_COLLECTION_PHOTOS.replace(/:id/gi, id) +\r\n            '?page=' + (page && !isNaN(page) ? +page : 1) +\r\n            '&per_page=' + (per_page && !isNaN(per_page) ? +per_page : 10);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to retrieve a list of collections related to a particular one.\r\n     * @function listRelatedCollections\r\n     * @memberof UnsplashApi\r\n     * @param {String} id - The Collection ID (required).\r\n     * @returns {Object} - The updated photo data object.\r\n     */\r\n    listRelatedCollections(id) {\r\n        if (!id || id === undefined || id.length === 0) {\r\n            throw new Error('Parameter : id is required!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.LIST_RELATED_COLLECTION.replace(/:id/gi, id);\r\n        return this.fetchUrl(url, 'GET');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to create a new collection. \r\n     * This requires the write_collections scope.\r\n     * @function createNewColection\r\n     * @memberof UnsplashApi\r\n     * @param {String} title - The title of the collection (Required).\r\n     * @param {String} description - The collection’s description (Optional).\r\n     * @param {Boolean} private - Whether to make this collection private (Optional; default false).\r\n     * @returns {Object} - The updated photo data object.\r\n     */\r\n    createNewColection(title, description, private_collection) {\r\n        if (!title || title === undefined || title.length === 0) {\r\n            throw new Error('Parameter : title is required!');\r\n        }\r\n        private_collection = private_collection || false;\r\n        let url = this.API_LOCATION + urlConfig.CREATE_NEW_COLLECTION +\r\n            '?title=' + encodeURIComponent(title) +\r\n            (description ? '&description=' + encodeURIComponent(description) : '') +\r\n            '&private=' + private_collection;\r\n        return this.fetchUrl(url, 'POST');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to update an existing collection belonging to the logged-in user. \r\n     * This requires the write_collections scope.\r\n     * @function updateExistingCollection\r\n     * @memberof UnsplashApi\r\n     * @param {String} id - The Collection ID (Required).\r\n     * @param {String} title - The title of the collection (Optional).\r\n     * @param {String} description - The collection’s description (Optional).\r\n     * @param {Boolean} private - Whether to make this collection private (Optional; default false).\r\n     * @returns {Object} - The updated photo data object.\r\n     */\r\n    updateExistingCollection(id, title, description, private_collection) {\r\n        if (!id || id === undefined || id.length === 0) {\r\n            throw new Error('Parameter : id is required!');\r\n        }\r\n        if (!title || title === undefined || title.length === 0) {\r\n            throw new Error('Parameter : title is required!');\r\n        }\r\n        private_collection = private_collection || false;\r\n        let url = this.API_LOCATION + urlConfig.UPDATE_EXISTING_COLLECTION.replace(/:id/gi, id) +\r\n            '?title=' + encodeURIComponent(title) +\r\n            (description ? '&description=' + encodeURIComponent(description) : '') +\r\n            '&private=' + private_collection;\r\n        return this.fetchUrl(url, 'PUT');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to delete a collection belonging to the logged-in user. \r\n     * This requires the write_collections scope.\r\n     * @function deleteCollection\r\n     * @memberof UnsplashApi\r\n     * @param {String} id - The Collection ID (Required).\r\n     * @returns {Object} - The updated photo data object.\r\n     */\r\n    deleteCollection(id) {\r\n        if (!id || id === undefined || id.length === 0) {\r\n            throw new Error('Parameter : id is required!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.DELETE_COLLECTION.replace(/:id/gi, id);\r\n        return this.fetchUrl(url, 'DELETE');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to add a photo to one of the logged-in user’s collections. \r\n     * Requires the write_collections scope.\r\n     * If the photo is already in the collection, this acion has no effect.\r\n     * @function addPhotoToCollection\r\n     * @memberof UnsplashApi\r\n     * @param {String} collection_id - The collection’s ID (Required).\r\n     * @param {String} photo_id - The photo’s ID (Required).\r\n     * @returns {Object} - The updated photo data object.\r\n     */\r\n    addPhotoToCollection(collection_id, photo_id) {\r\n        if (!collection_id || collection_id === undefined || collection_id.length === 0) {\r\n            throw new Error('Parameter : collection_id is required!');\r\n        }\r\n        if (!photo_id || photo_id === undefined || photo_id.length === 0) {\r\n            throw new Error('Parameter : photo_id is required!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.ADD_PHOTO_TO_COLLECTION.replace(/:collection_id/gi, collection_id) +\r\n            '?photo_id=' + photo_id;\r\n        return this.fetchUrl(url, 'POST');\r\n    };\r\n\r\n    /**\r\n     * Promise factory to remove a photo from one of the logged-in user’s collections. \r\n     * Requires the write_collections scope.\r\n     * @function removePhotoFromCollection\r\n     * @memberof UnsplashApi\r\n     * @param {String} collection_id - The collection’s ID (Required).\r\n     * @param {String} photo_id - The photo’s ID (Required).\r\n     * @returns {Object} - The updated photo data object.\r\n     */\r\n    removePhotoFromCollection(collection_id, photo_id) {\r\n        if (!collection_id || collection_id === undefined || collection_id.length === 0) {\r\n            throw new Error('Parameter : collection_id is required!');\r\n        }\r\n        if (!photo_id || photo_id === undefined || photo_id.length === 0) {\r\n            throw new Error('Parameter : photo_id is required!');\r\n        }\r\n        let url = this.API_LOCATION + urlConfig.REMOVE_PHOTO_FROM_COLLECTION.replace(/:collection_id/gi, collection_id) +\r\n            '?photo_id=' + photo_id;\r\n        return this.fetchUrl(url, 'DELETE');\r\n    };\r\n}\r\n\r\nmodule.exports = WrapSplashApi;","// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n// (MIT licensed)\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\n/**\n * body.js\n *\n * Body interface provides common methods for Request and Response\n */\n\nconst Stream = require('stream');\n\nvar _require = require('stream');\n\nconst PassThrough = _require.PassThrough;\n\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t} else if (body instanceof Blob) {\n\t\t// body is blob\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is array buffer\n\t} else if (body instanceof Stream) {\n\t\t// body is stream\n\t} else {\n\t\t// none of the above\n\t\t// coerce to string\n\t\tbody = String(body);\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof Stream) {\n\t\tbody.on('error', function (err) {\n\t\t\t_this[INTERNALS].error = new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\t// body is null\n\tif (this.body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is string\n\tif (typeof this.body === 'string') {\n\t\treturn Body.Promise.resolve(Buffer.from(this.body));\n\t}\n\n\t// body is blob\n\tif (this.body instanceof Blob) {\n\t\treturn Body.Promise.resolve(this.body[BUFFER]);\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(this.body)) {\n\t\treturn Body.Promise.resolve(this.body);\n\t}\n\n\t// body is buffer\n\tif (Object.prototype.toString.call(this.body) === '[object ArrayBuffer]') {\n\t\treturn Body.Promise.resolve(Buffer.from(this.body));\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(this.body instanceof Stream)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream error, such as incorrect content-encoding\n\t\t_this4.body.on('error', function (err) {\n\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t});\n\n\t\t_this4.body.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\t_this4.body.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof Stream && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Response or Request instance\n */\nfunction extractContentType(instance) {\n\tconst body = instance.body;\n\n\t// istanbul ignore if: Currently, because of a guard in Request, body\n\t// can never be null. Included here for completeness.\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (body instanceof Blob) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is array buffer\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\t// istanbul ignore if: included for completion\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn Buffer.byteLength(body);\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is URLSearchParams\n\t\treturn Buffer.byteLength(String(body));\n\t} else if (body instanceof Blob) {\n\t\t// body is blob\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is array buffer\n\t\treturn body.byteLength;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is URLSearchParams\n\t\tdest.write(Buffer.from(String(body)));\n\t\tdest.end();\n\t} else if (body instanceof Blob) {\n\t\t// body is blob\n\t\tdest.write(body[BUFFER]);\n\t\tdest.end();\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is array buffer\n\t\tdest.write(Buffer.from(body));\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name)) {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) {\n\t\t\t// no op\n\t\t} else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\n/**\n * response.js\n *\n * Response class provides content decoding\n */\n\nvar _require$1 = require('http');\n\nconst STATUS_CODES = _require$1.STATUS_CODES;\n\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders: new Headers(opts.headers)\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url;\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * request.js\n *\n * Request class contains server only options\n *\n * All spec algorithm step numbers are based on https://fetch.spec.whatwg.org/commit-snapshots/ae716822cb3a61843226cd090eefc6589446c1d2/.\n */\n\nvar _require$2 = require('url');\n\nconst format_url = _require$2.format;\nconst parse_url = _require$2.parse;\n\n\nconst INTERNALS$2 = Symbol('Request internals');\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parse_url(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parse_url(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parse_url(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (init.body != null) {\n\t\t\tconst contentType = extractContentType(this);\n\t\t\tif (contentType !== null && !headers.has('Content-Type')) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\tif (!headers.has('Connection') && !request.agent) {\n\t\theaders.set('Connection', 'close');\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent: request.agent\n\t});\n}\n\n/**\n * index.js\n *\n * a request API compatible with window.fetch\n *\n * All spec algorithm step numbers are based on https://fetch.spec.whatwg.org/commit-snapshots/ae716822cb3a61843226cd090eefc6589446c1d2/.\n */\n\nconst http = require('http');\nconst https = require('https');\n\nvar _require$3 = require('stream');\n\nconst PassThrough$1 = _require$3.PassThrough;\n\nvar _require2 = require('url');\n\nconst resolve_url = _require2.resolve;\n\nconst zlib = require('zlib');\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https : http).request;\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\t\t\tfinalize();\n\t\t});\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tconst locationURL = location === null ? null : resolve_url(request.url, location);\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresolve(new Response(body, response_options));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib.createGunzip(zlibOptions));\n\t\t\t\tresolve(new Response(body, response_options));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresolve(new Response(body, response_options));\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresolve(new Response(body, response_options));\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\n\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// Needed for TypeScript.\nfetch.default = fetch;\n\n// expose Promise\nfetch.Promise = global.Promise;\n\nexport default fetch;\nexport { Headers, Request, Response, FetchError };\n","module.exports = require(\"stream\");","module.exports = require(\"http\");","module.exports = require(\"url\");","module.exports = require(\"https\");","module.exports = require(\"zlib\");","module.exports = require(\"crypto\");"],"sourceRoot":""}